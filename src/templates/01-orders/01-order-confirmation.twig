{% extends '@layouts::base.twig' %}

{#
 # Email subject
 # ---
 # Order confirmation for your order {{ name }} 
 #}

{# title - start #}
{% block title %}
  {% verbatim %}
    {% capture title %} Thank you for your order! {% endcapture %}
  {% endverbatim %}

  {{ parent() }}
{% endblock %}
{# title - end #}

{# preview - start #}
{% block preview %}
  {% verbatim %}
    {% capture preview %}
        {% if requires_shipping %}
          {% case delivery_method %}
            {% when 'pick-up' %}
              Youâ€™ll receive an email when your order is ready for pickup.
            {% when 'local' %}
              we're getting your order ready for delivery.
            {% else %}
              Hey John, Thank you for ordering with iFixit Europe. We will now prepare your order for shipping and notify you as soon as your order has been shipped. You can track the status of your order by clicking on the button below:
          {% endcase %}
        {% endif %}
    {% endcapture %}
  {% endverbatim %}

  {{ parent() }}
{% endblock %}
{# preview - end #}

{# content - start #}
{% block content %}
  {% embed '@components::local/intro-text.twig' with {
    headline: '{{ title }}',
    text: '{{ preview }}'
  } %}
  {% endembed %} 

  {% verbatim %}
    <mj-raw>
      {% if requires_shipping and delivery_instructions != blank %}
    </mj-raw>
  {% endverbatim %}

    <mj-section padding-bottom="20px">
      <mj-column>
        <mj-text
          font-size="16px"
          line-height="1.7"
          color="{{ style.color['grey-dark'] }}"
        >
          <strong>Delivery information:</strong> {% verbatim %}{{ delivery_instructions }}{% endverbatim %}
        </mj-text>
      </mj-column>
    </mj-section>

  {% verbatim %}
    <mj-raw>
      {% endif %}
    </mj-raw>
  {% endverbatim %}

  {% verbatim %}
    <mj-raw>
      {% if order_status_url %}
    </mj-raw>
  {% endverbatim %}

    {% include '@components::local/actions.twig' with {
      primary: {
        url: '{{ order_status_url }}',
        text: 'ORDER STATUS'
      }
    } %}

  {% verbatim %}
    <mj-raw>
      {% else %}
    </mj-raw>
  {% endverbatim %}   

    {% embed '@components::local/actions.twig' %}
      {% block secondary_outer %}{% endblock %}
    {% endembed %}

  {% verbatim %}
    <mj-raw>
      {% endif %}
    </mj-raw>
  {% endverbatim %}
  <mj-section padding-bottom="20px">
      <mj-column>
        <mj-text
          font-size="16px"
          line-height="1.7"
          color="{{ style.color['grey-dark'] }}"
          align="center"
        >Follow us & share your project on social media with #iFixit
        </mj-text>
        <mj-text
        font-size="16px"
          line-height="1.7"
          color="{{ style.color['grey-dark'] }}"
          align="center"
          >For repair guides go to
        </mj-text>
        <mj-text
        font-size="16px"
          line-height="1.7"
          color="{{ style.color['grey-dark'] }}"
          align="center"
          ><a href="http://www.ifixit.com">www.ifixit.com</a>
        </mj-text>
      </mj-column>
    </mj-section>

  {% include '@components::local/gift-card-notice.twig' %}

  {% include '@components::local/headline.twig' with {
    headline: 'ORDER NO. {{ name }}',
    padding: '20px 0 5px'
  } %}

  <mj-wrapper>
    <mj-raw>
      {{ development
        ? '{% for line in line_items %}{% for i in (1..2) %}'
        : '{% for line in subtotal_line_items %}'
      }}
    </mj-raw>

      {% include '@components::local/product.twig' %}

    <mj-raw>
      {{ development
        ? '{% endfor %}{% endfor %}'
        : '{% endfor %}'
      }}
    </mj-raw>
  </mj-wrapper>

  {% embed '@components::local/totals.twig' %}
    {% block outstanding %}{% endblock %}
  {% endembed %}

{% include '@components::local/customer-information.twig' %}

  {# Terms of service and privacy policy #}
  <mj-section>
    <mj-column>
      <mj-spacer height="10px" />
      <mj-divider 
        border-width="1px"
        border-color="{{ style.color.grey }}"/>
      <mj-spacer height="5px" />
      <mj-text
          font-size="16px"
          line-height="1.7"
          color="{{ style.color['grey-dark'] }}"
          align="center"
      >We hope you are happy with your order. Should you have any reason to complain, you can return your order within 14 days to us. More information on your right of cancelation and returns can be found in our" <a href="https://eustore.ifixit.com/policies/refund-policy">cancellation policy</a>. 
      </mj-text>

      <mj-spacer height="20px" />
      <mj-text
          font-size="16px"
          line-height="1.7"
          color="{{ style.color['grey-dark'] }}"
          align="center"
      >At iFixit EUROPE we take the protection of your personal data very seriously. Further information on how we process your personal data can be found in our privacy policy. Our <a href="https://eustore.ifixit.com/policies/terms-of-service">general terms and conditions</a> apply. 
      </mj-text>
      <mj-spacer height="20px" />
    </mj-column>
  </mj-section>

  
{% endblock %}
{# content - end #}

{# footer - start #}
{% block footer %}
  {{ parent() }}

  {% if production %}
    <mj-raw>
      {% verbatim %}
        {% if shop.terms_of_service.body != blank %}
          {{ shop.terms_of_service | attach_as_pdf: "Terms of Service" }}
        {% endif %}

        {% if shop.refund_policy.body != blank %}
          {{ shop.refund_policy | attach_as_pdf: "Refund Policy" }}
        {% endif %}
      {% endverbatim %}
    </mj-raw>
  {% endif %}
{% endblock %}
{# footer - end #}